<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Maurice.Views.Configuracion"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Maurice.Views"
    xmlns:core="using:Maurice.Core"
    xmlns:converters="using:CommunityToolkit.WinUI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Width="450">

    <Page.Resources>
        <converters:BoolNegationConverter x:Key="BoolNegationConverter" />
    </Page.Resources>

    <Grid HorizontalAlignment="Center">
        <Grid.RowDefinitions>
            <RowDefinition Height="90"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="84"/>
            <RowDefinition Height="84"/>
            <RowDefinition Height="84"/>
            <RowDefinition Height="84"/>
            <RowDefinition Height="100" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="210"/>
            <ColumnDefinition Width="210"/>
        </Grid.ColumnDefinitions>

        <!-- Title -->
        <TextBlock 
            Text="ConfiguraciÃ³n" 
            FontSize="24" 
            FontWeight="Bold" 
            Margin="10"
            Grid.Row="0"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"/>

        <!-- Status Message -->
        <TextBlock 
            Text="{Binding StatusMessage}" 
            FontWeight="SemiBold"
            Grid.Row="1"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="10"
            Foreground="{ThemeResource SystemAccentColor}"
            TextWrapping="Wrap"
            TextAlignment="Center"/>

        <!-- Loading Indicator -->
        <ProgressRing 
            IsActive="{Binding IsLoading}" 
            Grid.Row="1"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Height="30"
            Width="30"
            Visibility="{Binding IsLoading}"/>

        <!-- User Form -->
        <TextBox 
            Header="Nombre" 
            PlaceholderText="Nombre" 
            Grid.Row="2"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="10"
            Width="400"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Text="{Binding CurrentUser.FirstName, Mode=TwoWay}"
            IsEnabled="{Binding IsLoading,Converter={StaticResource BoolNegationConverter}}"/>

        <TextBox 
            Header="Apellido" 
            PlaceholderText="Apellido" 
            Grid.Row="3"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="10"
            Width="400"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Text="{Binding CurrentUser.LastName, Mode=TwoWay}"
            IsEnabled="{Binding IsLoading,Converter={StaticResource BoolNegationConverter}}"/>

        <TextBox 
            Header="RFC" 
            PlaceholderText="AAAN000000A01" 
            Grid.Row="4"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="10"
            Width="400"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            MaxLength="13"
            CharacterCasing="Upper"
            Text="{Binding CurrentUser.Rfc, Mode=TwoWay}"
            IsEnabled="{Binding IsLoading,Converter={StaticResource BoolNegationConverter}}"/>

        <!-- Buttons -->
        <Button 
            Style="{StaticResource AccentButtonStyle}" 
            Content="Guardar" 
            Grid.Row="5"
            Grid.Column="0"
            HorizontalAlignment="Center"
            Command="{Binding SaveUserCommand}"/>

        <Button 
            Content="Cancelar" 
            Grid.Row="5"
            Grid.Column="1"
            HorizontalAlignment="Center"
            IsEnabled="{Binding IsLoading,Converter={StaticResource BoolNegationConverter}}"/>
    </Grid>
</Page>